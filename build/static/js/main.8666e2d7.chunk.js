(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{17:function(e,t,n){e.exports=n(41)},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),u=n(15),c=n.n(u),o=n(1),i=n.n(o),l=n(2),s=n(3),p=n(16),f=function(e){var t=e.blog,n=e.addLike,u=e.removeBlog,c=e.user,o=Object(a.useState)("view"),f=Object(s.a)(o,2),m=f[0],d=f[1],v=function(){d("view"===m?"hide":"view")},b=function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(Object(p.a)({},t,{likes:t.likes+1}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.confirm("Remove blog ".concat(t.title," by ").concat(t.author,"?"))&&u(t.id);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return"hide"===m?r.a.createElement("div",{className:"list"},t.title," ",t.author," ",r.a.createElement("button",{id:"view-button",onClick:v},m),r.a.createElement("br",null),t.url,r.a.createElement("br",null),t.user.name,r.a.createElement("br",null),"likes ",t.likes," ",r.a.createElement("button",{id:"like-button",onClick:b},"like"),r.a.createElement("br",null),t.user.username===c.username?r.a.createElement("button",{onClick:g},"Remove"):null):r.a.createElement("div",{className:"list"},t.title," ",t.author," ",r.a.createElement("button",{id:"view-button",onClick:v},m))},m=function(e){var t=e.notification;return null===t?null:r.a.createElement("div",{className:t.type},t.message)},d=function(e){var t=e.createBlog,n=Object(a.useState)(""),u=Object(s.a)(n,2),c=u[0],o=u[1],p=Object(a.useState)(""),f=Object(s.a)(p,2),m=f[0],d=f[1],v=Object(a.useState)(""),b=Object(s.a)(v,2),g=b[0],h=b[1],w=function(){var e=Object(l.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),t({title:c,author:m,url:g}),o(""),d(""),h("");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("h2",null,"create new"),r.a.createElement("form",{onSubmit:w},r.a.createElement("div",null,"title:",r.a.createElement("input",{id:"title",type:"text",value:c,name:"Title",onChange:function(e){var t=e.target;return o(t.value)}})),r.a.createElement("div",null,"author:",r.a.createElement("input",{id:"author",type:"text",value:m,name:"Author",onChange:function(e){var t=e.target;return d(t.value)}})),r.a.createElement("div",null,"url:",r.a.createElement("input",{id:"url",type:"text",value:g,name:"Url",onChange:function(e){var t=e.target;return h(t.value)}})),r.a.createElement("button",{id:"create-button",type:"submit"},"create")))},v=r.a.forwardRef((function(e,t){var n=Object(a.useState)(!1),u=Object(s.a)(n,2),c=u[0],o=u[1],i={display:c?"none":""},l={display:c?"":"none"},p=function(){o(!c)};return Object(a.useImperativeHandle)(t,(function(){return{toggleVisibility:p}})),r.a.createElement("div",null,r.a.createElement("div",{style:i},r.a.createElement("button",{onClick:p},e.buttonLabel)),r.a.createElement("div",{style:l},e.children,r.a.createElement("button",{onClick:p},"cancel")))}));v.displayName="Togglable";var b=v,g=function(e){var t=e.handleLogin,n=e.handleUsernameChange,a=e.handlePasswordChange,u=e.username,c=e.password;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,"username",r.a.createElement("input",{id:"username",type:"text",value:u,name:"Username",onChange:n})),r.a.createElement("div",null,"password",r.a.createElement("input",{id:"password",type:"password",value:c,name:"Password",onChange:a})),r.a.createElement("button",{id:"login-button",type:"submit"},"login")))},h=n(5),w=n.n(h),E=null,O={getAll:function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("/api/blogs");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(l.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:E}},e.next=3,w.a.post("/api/blogs",t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(l.a)(i.a.mark((function e(t,n){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.put("".concat("/api/blogs","/").concat(t),n);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),remove:function(){var e=Object(l.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:E}},a=w.a.delete("".concat("/api/blogs","/").concat(t),n),e.abrupt("return",a.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){E="bearer ".concat(e)}},k={login:function(){var e=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},j=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],u=t[1],c=Object(a.useState)(""),o=Object(s.a)(c,2),p=o[0],v=o[1],h=Object(a.useState)(""),w=Object(s.a)(h,2),E=w[0],j=w[1],y=Object(a.useState)(null),x=Object(s.a)(y,2),S=x[0],C=x[1],B=Object(a.useState)(null),L=Object(s.a)(B,2),U=L[0],N=L[1],T=Object(a.useRef)();Object(a.useEffect)((function(){O.getAll().then((function(e){return u(e)}))}),[]),Object(a.useEffect)((function(){var e=window.localStorage.getItem("loggedBloggappUser");if(e){var t=JSON.parse(e);C(t),O.setToken(t.token)}}),[]);var A=function(e,t){N({message:e,type:t}),setTimeout((function(){N(null)}),5e3)},I=function(){var e=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,k.login({username:p,password:E});case 4:n=e.sent,window.localStorage.setItem("loggedBloggappUser",JSON.stringify(n)),O.setToken(n.token),C(n),v(""),j(""),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),A("wrong username or password","error");case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.localStorage.removeItem("loggedBloggappUser"),C(null);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(l.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T.current.toggleVisibility(),e.next=3,O.create(t);case 3:a=e.sent,console.log(a),u(n.concat(a)),A("a new blog ".concat(a.title," by ").concat(a.author," added"),"success");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(l.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.update(t.id,t);case 2:a=e.sent,u(n.map((function(e){return e.id===a.id?a:e})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.remove(t);case 2:u(n.filter((function(e){return e.id!==t}))),A("Blog removed","success");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return null===S?r.a.createElement("div",null,r.a.createElement("h2",null,"Log in to application"),r.a.createElement(m,{notification:U}),r.a.createElement(g,{handleLogin:I,handleUsernameChange:function(e){var t=e.target;return v(t.value)},handlePasswordChange:function(e){var t=e.target;return j(t.value)},username:p,password:E})):r.a.createElement("div",null,r.a.createElement("h2",null,"blogs"),r.a.createElement(m,{notification:U}),r.a.createElement("p",null,S.name," logged in",r.a.createElement("button",{onClick:J},"logout")),r.a.createElement(b,{buttonLabel:"new blog",ref:T},r.a.createElement(d,{createBlog:R})),n.sort((function(e,t){return t.likes-e.likes})).map((function(e){return r.a.createElement(f,{key:e.id,blog:e,addLike:P,removeBlog:z,user:S})})))};n(40);c.a.render(r.a.createElement(j,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.8666e2d7.chunk.js.map